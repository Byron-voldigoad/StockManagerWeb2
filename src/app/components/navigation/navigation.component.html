<nav class="sticky top-0 z-50 bg-white/95 backdrop-blur-md border-b border-slate-200 shadow-sm">
  <div class="container mx-auto px-4 py-3 md:py-4 flex items-center justify-between">
    <!-- Logo dynamique -->
    <a
      routerLink="/"
      class="text-xl md:text-2xl font-extrabold tracking-tight text-slate-900 hover:text-blue-600 transition-colors duration-200 flex items-center gap-2.5 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 rounded-lg px-2 py-1"
    >
      <!-- Logo image dynamique -->
      <div *ngIf="logoUrl" class="flex items-center">
        <img 
          [src]="logoUrl" 
          [alt]="configService.getSetting('site_name') || 'La Brocante'"
          class="h-10 w-10 md:h-10 md:w-10 object-contain"
        />
      </div>
      
      <!-- Fallback: Icône SVG si pas de logo -->
      <div *ngIf="!logoUrl" class="flex items-center">
        <svg class="h-6 w-6 md:h-8 md:w-8 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M10 2a4 4 0 00-4 4v1H5a1 1 0 00-.994.89l-1 9A1 1 0 004 18h12a1 1 0 00.994-1.11l-1-9A1 1 0 0015 7h-1V6a4 4 0 00-4-4zm2 5V6a2 2 0 10-4 0v1h4zm-6 3a1 1 0 112 0 1 1 0 01-2 0zm7-1a1 1 0 100 2 1 1 0 000-2z" clip-rule="evenodd"/>
        </svg>
      </div>
      <span class="hidden sm:inline">{{
        configService.getSetting("site_name") || "La Brocante"
      }}</span>
    </a>

    <!-- Menu Desktop dynamique -->
    <div class="hidden md:flex items-center gap-8">
      <a
        routerLink="/"
        routerLinkActive="text-blue-600 font-bold border-b-2 border-blue-600"
        [routerLinkActiveOptions]="{ exact: true }"
        class="text-slate-700 hover:text-blue-600 transition-colors duration-200 pb-1 text-sm font-medium focus:outline-none focus:ring-1 focus:ring-blue-400 rounded px-1"
      >
        {{ configService.getSetting("menu_accueil") || "Accueil" }}
      </a>
      <a
        routerLink="/produits"
        routerLinkActive="text-blue-600 font-bold border-b-2 border-blue-600"
        class="text-slate-700 hover:text-blue-600 transition-colors duration-200 pb-1 text-sm font-medium focus:outline-none focus:ring-1 focus:ring-blue-400 rounded px-1"
      >
        {{ configService.getSetting("menu_produits") || "Produits" }}
      </a>
      <a
        routerLink="/contact"
        routerLinkActive="text-blue-600 font-bold border-b-2 border-blue-600"
        class="text-slate-700 hover:text-blue-600 transition-colors duration-200 pb-1 text-sm font-medium focus:outline-none focus:ring-1 focus:ring-blue-400 rounded px-1"
      >
        {{ configService.getSetting("menu_contact") || "Contact" }}
      </a>
      <a
        routerLink="/localisation"
        routerLinkActive="text-blue-600 font-bold border-b-2 border-blue-600"
        class="text-slate-700 hover:text-blue-600 transition-colors duration-200 pb-1 text-sm font-medium focus:outline-none focus:ring-1 focus:ring-blue-400 rounded px-1"
      >
        {{ configService.getSetting("menu_localisation") || "Localisation" }}
      </a>
    </div>

    <!-- Menu Mobile -->
    <div class="md:hidden">
      <!-- Burger menu icon -->
      <button
        (click)="toggleMobileMenu()"
        class="text-slate-700 hover:text-blue-600 transition-colors p-2.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"
        [attr.aria-expanded]="isMobileMenuOpen"
        aria-label="Toggle mobile menu"
      >
        <!-- Icône burger ou croix selon l'état -->
        <svg
          *ngIf="!isMobileMenuOpen"
          class="w-6 h-6"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          aria-hidden="true"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"
          ></path>
        </svg>
        <svg
          *ngIf="isMobileMenuOpen"
          class="w-6 h-6"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          aria-hidden="true"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18L18 6M6 6l12 12"
          ></path>
        </svg>
      </button>
    </div>
  </div>

  <!-- Menu Mobile Dropdown -->
  <div
    *ngIf="isMobileMenuOpen"
    class="md:hidden bg-white border-t border-slate-200 shadow-lg"
  >
    <div class="container mx-auto px-4 py-4 space-y-2">
      <a
        routerLink="/"
        routerLinkActive="text-blue-600 font-bold bg-blue-50"
        (click)="closeMobileMenu()"
        class="block text-slate-700 hover:text-blue-600 transition-colors duration-200 py-3 px-3 text-base font-medium rounded-lg"
      >
        {{ configService.getSetting("menu_accueil") || "Accueil" }}
      </a>
      <a
        routerLink="/produits"
        routerLinkActive="text-blue-600 font-bold bg-blue-50"
        (click)="closeMobileMenu()"
        class="block text-slate-700 hover:text-blue-600 transition-colors duration-200 py-3 px-3 text-base font-medium rounded-lg"
      >
        {{ configService.getSetting("menu_produits") || "Produits" }}
      </a>
      <a
        routerLink="/contact"
        routerLinkActive="text-blue-600 font-bold bg-blue-50"
        (click)="closeMobileMenu()"
        class="block text-slate-700 hover:text-blue-600 transition-colors duration-200 py-3 px-3 text-base font-medium rounded-lg"
      >
        {{ configService.getSetting("menu_contact") || "Contact" }}
      </a>
      <a
        routerLink="/localisation"
        routerLinkActive="text-blue-600 font-bold bg-blue-50"
        (click)="closeMobileMenu()"
        class="block text-slate-700 hover:text-blue-600 transition-colors duration-200 py-3 px-3 text-base font-medium rounded-lg"
      >
        {{ configService.getSetting("menu_localisation") || "Localisation" }}
      </a>
    </div>
  </div>
</nav>
